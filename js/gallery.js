!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipeUI_Default=b()}(this,function(){"use strict";return function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=this,w=!1,x=!0,y=!0,z={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(a,b){return a.title?(b.children[0].innerHTML=a.title,!0):(b.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return a.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return a.currItem.title||""},indexIndicatorSep:" / ",fitControlsWidth:1200},A=function(a){if(r)return!0;a=a||window.event,q.timeToIdle&&q.mouseUsed&&!k&&K();for(var c,d,e=a.target||a.srcElement,f=e.getAttribute("class")||"",g=0;g<S.length;g++)c=S[g],c.onTap&&f.indexOf("pswp__"+c.name)>-1&&(c.onTap(),d=!0);if(d){a.stopPropagation&&a.stopPropagation(),r=!0;var h=b.features.isOldAndroid?600:30;s=setTimeout(function(){r=!1},h)}},B=function(){return!a.likelyTouchDevice||q.mouseUsed||screen.width>q.fitControlsWidth},C=function(a,c,d){b[(d?"add":"remove")+"Class"](a,"pswp__"+c)},D=function(){var a=1===q.getNumItemsFn();a!==p&&(C(d,"ui--one-slide",a),p=a)},E=function(){C(i,"share-modal--hidden",y)},F=function(){return y=!y,y?(b.removeClass(i,"pswp__share-modal--fade-in"),setTimeout(function(){y&&E()},300)):(E(),setTimeout(function(){y||b.addClass(i,"pswp__share-modal--fade-in")},30)),y||H(),!1},G=function(b){b=b||window.event;var c=b.target||b.srcElement;return a.shout("shareLinkClick",b,c),!!c.href&&(!!c.hasAttribute("download")||(window.open(c.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),y||F(),!1))},H=function(){for(var a,b,c,d,e,f="",g=0;g<q.shareButtons.length;g++)a=q.shareButtons[g],c=q.getImageURLForShare(a),d=q.getPageURLForShare(a),e=q.getTextForShare(a),b=a.url.replace("{{url}}",encodeURIComponent(d)).replace("{{image_url}}",encodeURIComponent(c)).replace("{{raw_image_url}}",c).replace("{{text}}",encodeURIComponent(e)),f+='<a href="'+b+'" target="_blank" class="pswp__share--'+a.id+'"'+(a.download?"download":"")+">"+a.label+"</a>",q.parseShareButtonOut&&(f=q.parseShareButtonOut(a,f));i.children[0].innerHTML=f,i.children[0].onclick=G},I=function(a){for(var c=0;c<q.closeElClasses.length;c++)if(b.hasClass(a,"pswp__"+q.closeElClasses[c]))return!0},J=0,K=function(){clearTimeout(u),J=0,k&&v.setIdle(!1)},L=function(a){a=a||window.event;var b=a.relatedTarget||a.toElement;b&&"HTML"!==b.nodeName||(clearTimeout(u),u=setTimeout(function(){v.setIdle(!0)},q.timeToIdleOutside))},M=function(){q.fullscreenEl&&!b.features.isOldAndroid&&(c||(c=v.getFullscreenAPI()),c?(b.bind(document,c.eventK,v.updateFullscreen),v.updateFullscreen(),b.addClass(a.template,"pswp--supports-fs")):b.removeClass(a.template,"pswp--supports-fs"))},N=function(){q.preloaderEl&&(O(!0),l("beforeChange",function(){clearTimeout(o),o=setTimeout(function(){a.currItem&&a.currItem.loading?(!a.allowProgressiveImg()||a.currItem.img&&!a.currItem.img.naturalWidth)&&O(!1):O(!0)},q.loadingIndicatorDelay)}),l("imageLoadComplete",function(b,c){a.currItem===c&&O(!0)}))},O=function(a){n!==a&&(C(m,"preloader--active",!a),n=a)},P=function(a){var c=a.vGap;if(B()){var g=q.barsSize;if(q.captionEl&&"auto"===g.bottom)if(f||(f=b.createEl("pswp__caption pswp__caption--fake"),f.appendChild(b.createEl("pswp__caption__center")),d.insertBefore(f,e),b.addClass(d,"pswp__ui--fit")),q.addCaptionHTMLFn(a,f,!0)){var h=f.clientHeight;c.bottom=parseInt(h,10)||44}else c.bottom=g.top;else c.bottom="auto"===g.bottom?0:g.bottom;c.top=g.top}else c.top=c.bottom=0},Q=function(){q.timeToIdle&&l("mouseUsed",function(){b.bind(document,"mousemove",K),b.bind(document,"mouseout",L),t=setInterval(function(){2===++J&&v.setIdle(!0)},q.timeToIdle/2)})},R=function(){l("onVerticalDrag",function(a){x&&a<.95?v.hideControls():!x&&a>=.95&&v.showControls()});var a;l("onPinchClose",function(b){x&&b<.9?(v.hideControls(),a=!0):a&&!x&&b>.9&&v.showControls()}),l("zoomGestureEnded",function(){(a=!1)&&!x&&v.showControls()})},S=[{name:"caption",option:"captionEl",onInit:function(a){e=a}},{name:"share-modal",option:"shareEl",onInit:function(a){i=a},onTap:function(){F()}},{name:"button--share",option:"shareEl",onInit:function(a){h=a},onTap:function(){F()}},{name:"button--zoom",option:"zoomEl",onTap:a.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(a){g=a}},{name:"button--close",option:"closeEl",onTap:a.close},{name:"button--arrow--left",option:"arrowEl",onTap:a.prev},{name:"button--arrow--right",option:"arrowEl",onTap:a.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){c.isFullscreen()?c.exit():c.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(a){m=a}}],T=function(){var a,c,e,f=function(d){if(d)for(var f=d.length,g=0;g<f;g++){a=d[g],c=a.className;for(var h=0;h<S.length;h++)e=S[h],c.indexOf("pswp__"+e.name)>-1&&(q[e.option]?(b.removeClass(a,"pswp__element--disabled"),e.onInit&&e.onInit(a)):b.addClass(a,"pswp__element--disabled"))}};f(d.children);var g=b.getChildByClass(d,"pswp__top-bar");g&&f(g.children)};v.init=function(){b.extend(a.options,z,!0),q=a.options,d=b.getChildByClass(a.scrollWrap,"pswp__ui"),l=a.listen,R(),l("beforeChange",v.update),l("doubleTap",function(b){var c=a.currItem.initialZoomLevel;a.getZoomLevel()!==c?a.zoomTo(c,b,333):a.zoomTo(q.getDoubleTapZoom(!1,a.currItem),b,333)}),l("preventDragEvent",function(a,b,c){var d=a.target||a.srcElement;d&&d.getAttribute("class")&&a.type.indexOf("mouse")>-1&&(d.getAttribute("class").indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(d.tagName))&&(c.prevent=!1)}),l("bindEvents",function(){b.bind(d,"pswpTap click",A),b.bind(a.scrollWrap,"pswpTap",v.onGlobalTap),a.likelyTouchDevice||b.bind(a.scrollWrap,"mouseover",v.onMouseOver)}),l("unbindEvents",function(){y||F(),t&&clearInterval(t),b.unbind(document,"mouseout",L),b.unbind(document,"mousemove",K),b.unbind(d,"pswpTap click",A),b.unbind(a.scrollWrap,"pswpTap",v.onGlobalTap),b.unbind(a.scrollWrap,"mouseover",v.onMouseOver),c&&(b.unbind(document,c.eventK,v.updateFullscreen),c.isFullscreen()&&(q.hideAnimationDuration=0,c.exit()),c=null)}),l("destroy",function(){q.captionEl&&(f&&d.removeChild(f),b.removeClass(e,"pswp__caption--empty")),i&&(i.children[0].onclick=null),b.removeClass(d,"pswp__ui--over-close"),b.addClass(d,"pswp__ui--hidden"),v.setIdle(!1)}),q.showAnimationDuration||b.removeClass(d,"pswp__ui--hidden"),l("initialZoomIn",function(){q.showAnimationDuration&&b.removeClass(d,"pswp__ui--hidden")}),l("initialZoomOut",function(){b.addClass(d,"pswp__ui--hidden")}),l("parseVerticalMargin",P),T(),q.shareEl&&h&&i&&(y=!0),D(),Q(),M(),N()},v.setIdle=function(a){k=a,C(d,"ui--idle",a)},v.update=function(){x&&a.currItem?(v.updateIndexIndicator(),q.captionEl&&(q.addCaptionHTMLFn(a.currItem,e),C(e,"caption--empty",!a.currItem.title)),w=!0):w=!1,y||F(),D()},v.updateFullscreen=function(d){d&&setTimeout(function(){a.setScrollOffset(0,b.getScrollY())},50),b[(c.isFullscreen()?"add":"remove")+"Class"](a.template,"pswp--fs")},v.updateIndexIndicator=function(){q.counterEl&&(g.innerHTML=a.getCurrentIndex()+1+q.indexIndicatorSep+q.getNumItemsFn())},v.onGlobalTap=function(c){c=c||window.event;var d=c.target||c.srcElement;if(!r)if(c.detail&&"mouse"===c.detail.pointerType){if(I(d))return void a.close();b.hasClass(d,"pswp__img")&&(1===a.getZoomLevel()&&a.getZoomLevel()<=a.currItem.fitRatio?q.clickToCloseNonZoomable&&a.close():a.toggleDesktopZoom(c.detail.releasePoint))}else if(q.tapToToggleControls&&(x?v.hideControls():v.showControls()),q.tapToClose&&(b.hasClass(d,"pswp__img")||I(d)))return void a.close()},v.onMouseOver=function(a){a=a||window.event;var b=a.target||a.srcElement;C(d,"ui--over-close",I(b))},v.hideControls=function(){b.addClass(d,"pswp__ui--hidden"),x=!1},v.showControls=function(){x=!0,w||v.update(),b.removeClass(d,"pswp__ui--hidden")},v.supportsFullscreen=function(){var a=document;return!!(a.exitFullscreen||a.mozCancelFullScreen||a.webkitExitFullscreen||a.msExitFullscreen)},v.getFullscreenAPI=function(){var b,c=document.documentElement,d="fullscreenchange";return c.requestFullscreen?b={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:d}:c.mozRequestFullScreen?b={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+d}:c.webkitRequestFullscreen?b={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+d}:c.msRequestFullscreen&&(b={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),b&&(b.enter=function(){if(j=q.closeOnScroll,q.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK)return a.template[this.enterK]();a.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},b.exit=function(){return q.closeOnScroll=j,document[this.exitK]()},b.isFullscreen=function(){return document[this.elementK]}),b}}}),function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.PhotoSwipe=b()}(this,function(){"use strict";return function(a,b,c,d){var e={features:null,bind:function(a,b,c,d){var e=(d?"remove":"add")+"EventListener";b=b.split(" ");for(var f=0;f<b.length;f++)b[f]&&a[e](b[f],c,!1)},isArray:function(a){return a instanceof Array},createEl:function(a,b){var c=document.createElement(b||"div");return a&&(c.className=a),c},getScrollY:function(){var a=window.pageYOffset;return void 0!==a?a:document.documentElement.scrollTop},unbind:function(a,b,c){e.bind(a,b,c,!0)},removeClass:function(a,b){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(a,b){e.hasClass(a,b)||(a.className+=(a.className?" ":"")+b)},hasClass:function(a,b){return a.className&&new RegExp("(^|\\s)"+b+"(\\s|$)").test(a.className)},getChildByClass:function(a,b){for(var c=a.firstChild;c;){if(e.hasClass(c,b))return c;c=c.nextSibling}},arraySearch:function(a,b,c){for(var d=a.length;d--;)if(a[d][c]===b)return d;return-1},extend:function(a,b,c){for(var d in b)if(b.hasOwnProperty(d)){if(c&&a.hasOwnProperty(d))continue;a[d]=b[d]}},easing:{sine:{out:function(a){return Math.sin(a*(Math.PI/2))},inOut:function(a){return-(Math.cos(Math.PI*a)-1)/2}},cubic:{out:function(a){return--a*a*a+1}}},detectFeatures:function(){if(e.features)return e.features;var a=e.createEl(),b=a.style,c="",d={};if(d.oldIE=document.all&&!document.addEventListener,d.touch="ontouchstart"in window,window.requestAnimationFrame&&(d.raf=window.requestAnimationFrame,d.caf=window.cancelAnimationFrame),d.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!d.pointerEvent){var f=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var g=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g&&g.length>0&&(g=parseInt(g[1],10))>=1&&g<8&&(d.isOldIOSPhone=!0)}var h=f.match(/Android\s([0-9\.]*)/),i=h?h[1]:0;i=parseFloat(i),i>=1&&(i<4.4&&(d.isOldAndroid=!0),d.androidVersion=i),d.isMobileOpera=/opera mini|opera mobi/i.test(f)}for(var j,k,l=["transform","perspective","animationName"],m=["","webkit","Moz","ms","O"],n=0;n<4;n++){c=m[n];for(var o=0;o<3;o++)j=l[o],k=c+(c?j.charAt(0).toUpperCase()+j.slice(1):j),!d[j]&&k in b&&(d[j]=k);c&&!d.raf&&(c=c.toLowerCase(),d.raf=window[c+"RequestAnimationFrame"],d.raf&&(d.caf=window[c+"CancelAnimationFrame"]||window[c+"CancelRequestAnimationFrame"]))}if(!d.raf){var p=0;d.raf=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-p)),d=window.setTimeout(function(){a(b+c)},c);return p=b+c,d},d.caf=function(a){clearTimeout(a)}}return d.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e.features=d,d}};e.detectFeatures(),e.features.oldIE&&(e.bind=function(a,b,c,d){b=b.split(" ");for(var e,f=(d?"detach":"attach")+"Event",g=function(){c.handleEvent.call(c)},h=0;h<b.length;h++)if(e=b[h])if("object"==typeof c&&c.handleEvent){if(d){if(!c["oldIE"+e])return!1}else c["oldIE"+e]=g;a[f]("on"+e,c["oldIE"+e])}else a[f]("on"+e,c)});var f=this,g={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.75,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(a){return"A"===a.tagName},getDoubleTapZoom:function(a,b){return a?1:b.initialZoomLevel<.7?1:1.33},maxSpreadZoom:1.33,modal:!0,scaleMode:"fit"};e.extend(g,d);var h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,$,_,aa,ba,ca,da,ea,fa,ga,ha,ia,ja=function(){return{x:0,y:0}},ka=ja(),la=ja(),ma=ja(),na={},oa=0,pa={},qa=ja(),ra=0,sa=!0,ta=[],ua={},va=!1,wa=function(a,b){e.extend(f,b.publicMethods),ta.push(a)},xa=function(a){var b=Xb();return a>b-1?a-b:a<0?b+a:a},ya={},za=function(a,b){return ya[a]||(ya[a]=[]),ya[a].push(b)},Aa=function(a){var b=ya[a];if(b){var c=Array.prototype.slice.call(arguments);c.shift();for(var d=0;d<b.length;d++)b[d].apply(f,c)}},Ba=function(){return(new Date).getTime()},Ca=function(a){ga=a,f.bg.style.opacity=a*g.bgOpacity},Da=function(a,b,c,d,e){(!va||e&&e!==f.currItem)&&(d/=e?e.fitRatio:f.currItem.fitRatio),a[C]=s+b+"px, "+c+"px"+t+" scale("+d+")"},Ea=function(a){ba&&(a&&(q>f.currItem.fitRatio?va||(hc(f.currItem,!1,!0),va=!0):va&&(hc(f.currItem),va=!1)),Da(ba,ma.x,ma.y,q))},Fa=function(a){a.container&&Da(a.container.style,a.initialPosition.x,a.initialPosition.y,a.initialZoomLevel,a)},Ga=function(a,b){b[C]=s+a+"px, 0px"+t},Ha=function(a,b){if(!g.loop&&b){var c=k+(qa.x*oa-a)/qa.x,d=Math.round(a-ob.x);(c<0&&d>0||c>=Xb()-1&&d<0)&&(a=ob.x+d*g.mainScrollEndFriction)}ob.x=a,Ga(a,l)},Ia=function(a,b){var c=pb[a]-pa[a];return la[a]+ka[a]+c-c*(b/r)},Ja=function(a,b){a.x=b.x,a.y=b.y,b.id&&(a.id=b.id)},Ka=function(a){a.x=Math.round(a.x),a.y=Math.round(a.y)},La=null,Ma=function(){La&&(e.unbind(document,"mousemove",Ma),e.addClass(a,"pswp--has_mouse"),g.mouseUsed=!0,Aa("mouseUsed")),La=setTimeout(function(){La=null},100)},Na=function(){e.bind(document,"keydown",f),L.transform&&e.bind(f.scrollWrap,"click",f),g.mouseUsed||e.bind(document,"mousemove",Ma),e.bind(window,"resize scroll",f),Aa("bindEvents")},Oa=function(){e.unbind(window,"resize",f),e.unbind(window,"scroll",p.scroll),e.unbind(document,"keydown",f),e.unbind(document,"mousemove",Ma),L.transform&&e.unbind(f.scrollWrap,"click",f),S&&e.unbind(window,n,f),Aa("unbindEvents")},Pa=function(a,b){var c=dc(f.currItem,na,a);return b&&(aa=c),c},Qa=function(a){return a||(a=f.currItem),a.initialZoomLevel},Ra=function(a){return a||(a=f.currItem),a.w>0?g.maxSpreadZoom:1},Sa=function(a,b,c,d){return d===f.currItem.initialZoomLevel?(c[a]=f.currItem.initialPosition[a],!0):(c[a]=Ia(a,d),c[a]>b.min[a]?(c[a]=b.min[a],!0):c[a]<b.max[a]&&(c[a]=b.max[a],!0))},Ta=function(){if(C){var b=L.perspective&&!E;return s="translate"+(b?"3d(":"("),void(t=L.perspective?", 0px)":")")}C="left",e.addClass(a,"pswp--ie"),Ga=function(a,b){b.left=a+"px"},Fa=function(a){var b=a.fitRatio>1?1:a.fitRatio,c=a.container.style,d=b*a.w,e=b*a.h;c.width=d+"px",c.height=e+"px",c.left=a.initialPosition.x+"px",c.top=a.initialPosition.y+"px"},Ea=function(){if(ba){var a=ba,b=f.currItem,c=b.fitRatio>1?1:b.fitRatio,d=c*b.w,e=c*b.h;a.width=d+"px",a.height=e+"px",a.left=ma.x+"px",a.top=ma.y+"px"}}},Ua=function(a){var b="";g.escKey&&27===a.keyCode?b="close":g.arrowKeys&&(37===a.keyCode?b="prev":39===a.keyCode&&(b="next")),b&&(a.ctrlKey||a.altKey||a.shiftKey||a.metaKey||(a.preventDefault?a.preventDefault():a.returnValue=!1,f[b]()))},Va=function(a){a&&(V||U||ca||Q)&&(a.preventDefault(),a.stopPropagation())},Wa=function(){f.setScrollOffset(0,e.getScrollY())},Xa={},Ya=0,Za=function(a){Xa[a]&&(Xa[a].raf&&G(Xa[a].raf),Ya--,delete Xa[a])},$a=function(a){Xa[a]&&Za(a),Xa[a]||(Ya++,Xa[a]={})},_a=function(){for(var a in Xa)Xa.hasOwnProperty(a)&&Za(a)},ab=function(a,b,c,d,e,f,g){var h,i=Ba();$a(a);var j=function(){if(Xa[a]){if((h=Ba()-i)>=d)return Za(a),f(c),void(g&&g());f((c-b)*e(h/d)+b),Xa[a].raf=F(j)}};j()},bb={shout:Aa,listen:za,viewportSize:na,options:g,isMainScrollAnimating:function(){return ca},getZoomLevel:function(){return q},getCurrentIndex:function(){return k},isDragging:function(){return S},isZooming:function(){return Z},setScrollOffset:function(a,b){pa.x=a,K=pa.y=b,Aa("updateScrollOffset",pa)},applyZoomPan:function(a,b,c,d){ma.x=b,ma.y=c,q=a,Ea(d)},init:function(){if(!h&&!i){var c;f.framework=e,f.template=a,f.bg=e.getChildByClass(a,"pswp__bg"),H=a.className,h=!0,L=e.detectFeatures(),F=L.raf,G=L.caf,C=L.transform,J=L.oldIE,f.scrollWrap=e.getChildByClass(a,"pswp__scroll-wrap"),f.container=e.getChildByClass(f.scrollWrap,"pswp__container"),l=f.container.style,f.itemHolders=w=[{el:f.container.children[0],wrap:0,index:-1},{el:f.container.children[1],wrap:0,index:-1},{el:f.container.children[2],wrap:0,index:-1}],w[0].el.style.display=w[2].el.style.display="none",Ta(),p={resize:f.updateSize,scroll:Wa,keydown:Ua,click:Va};var d=L.isOldIOSPhone||L.isOldAndroid||L.isMobileOpera;for(L.animationName&&L.transform&&!d||(g.showAnimationDuration=g.hideAnimationDuration=0),c=0;c<ta.length;c++)f["init"+ta[c]]();if(b){(f.ui=new b(f,e)).init()}Aa("firstUpdate"),k=k||g.index||0,(isNaN(k)||k<0||k>=Xb())&&(k=0),f.currItem=Wb(k),(L.isOldIOSPhone||L.isOldAndroid)&&(sa=!1),a.setAttribute("aria-hidden","false"),g.modal&&(sa?a.style.position="fixed":(a.style.position="absolute",a.style.top=e.getScrollY()+"px")),void 0===K&&(Aa("initialLayout"),K=I=e.getScrollY());var j="pswp--open ";for(g.mainClass&&(j+=g.mainClass+" "),g.showHideOpacity&&(j+="pswp--animate_opacity "),j+=E?"pswp--touch":"pswp--notouch",j+=L.animationName?" pswp--css_animation":"",j+=L.svg?" pswp--svg":"",e.addClass(a,j),f.updateSize(),m=-1,ra=null,c=0;c<3;c++)Ga((c+m)*qa.x,w[c].el.style);J||e.bind(f.scrollWrap,o,f),za("initialZoomInEnd",function(){f.setContent(w[0],k-1),f.setContent(w[2],k+1),w[0].el.style.display=w[2].el.style.display="block",g.focus&&a.focus(),Na()}),f.setContent(w[1],k),f.updateCurrItem(),Aa("afterInit"),sa||(u=setInterval(function(){Ya||S||Z||q!==f.currItem.initialZoomLevel||f.updateSize()},1e3)),e.addClass(a,"pswp--visible")}},close:function(){h&&(h=!1,i=!0,Aa("close"),Oa(),Zb(f.currItem,null,!0,f.destroy))},destroy:function(){Aa("destroy"),Sb&&clearTimeout(Sb),a.setAttribute("aria-hidden","true"),a.className=H,u&&clearInterval(u),e.unbind(f.scrollWrap,o,f),e.unbind(window,"scroll",f),ub(),_a(),ya=null},panTo:function(a,b,c){c||(a>aa.min.x?a=aa.min.x:a<aa.max.x&&(a=aa.max.x),b>aa.min.y?b=aa.min.y:b<aa.max.y&&(b=aa.max.y)),ma.x=a,ma.y=b,Ea()},handleEvent:function(a){a=a||window.event,p[a.type]&&p[a.type](a)},goTo:function(a){a=xa(a);var b=a-k;ra=b,k=a,f.currItem=Wb(k),oa-=b,Ha(qa.x*oa),_a(),ca=!1,f.updateCurrItem()},next:function(){f.goTo(k+1)},prev:function(){f.goTo(k-1)},updateCurrZoomItem:function(a){if(a&&Aa("beforeChange",0),w[1].el.children.length){var b=w[1].el.children[0];ba=e.hasClass(b,"pswp__zoom-wrap")?b.style:null}else ba=null;aa=f.currItem.bounds,r=q=f.currItem.initialZoomLevel,ma.x=aa.center.x,ma.y=aa.center.y,a&&Aa("afterChange")},invalidateCurrItems:function(){v=!0;for(var a=0;a<3;a++)w[a].item&&(w[a].item.needsUpdate=!0)},updateCurrItem:function(a){if(0!==ra){var b,c=Math.abs(ra);if(!(a&&c<2)){f.currItem=Wb(k),va=!1,Aa("beforeChange",ra),c>=3&&(m+=ra+(ra>0?-3:3),c=3);for(var d=0;d<c;d++)ra>0?(b=w.shift(),w[2]=b,m++,Ga((m+2)*qa.x,b.el.style),f.setContent(b,k-c+d+1+1)):(b=w.pop(),w.unshift(b),m--,Ga(m*qa.x,b.el.style),f.setContent(b,k+c-d-1-1));if(ba&&1===Math.abs(ra)){var e=Wb(x);e.initialZoomLevel!==q&&(dc(e,na),hc(e),Fa(e))}ra=0,f.updateCurrZoomItem(),x=k,Aa("afterChange")}}},updateSize:function(b){if(!sa&&g.modal){var c=e.getScrollY();if(K!==c&&(a.style.top=c+"px",K=c),!b&&ua.x===window.innerWidth&&ua.y===window.innerHeight)return;ua.x=window.innerWidth,ua.y=window.innerHeight,a.style.height=ua.y+"px"}if(na.x=f.scrollWrap.clientWidth,na.y=f.scrollWrap.clientHeight,Wa(),qa.x=na.x+Math.round(na.x*g.spacing),qa.y=na.y,Ha(qa.x*oa),Aa("beforeResize"),void 0!==m){for(var d,h,i,j=0;j<3;j++)d=w[j],Ga((j+m)*qa.x,d.el.style),i=k+j-1,g.loop&&Xb()>2&&(i=xa(i)),h=Wb(i),h&&(v||h.needsUpdate||!h.bounds)?(f.cleanSlide(h),f.setContent(d,i),1===j&&(f.currItem=h,f.updateCurrZoomItem(!0)),h.needsUpdate=!1):-1===d.index&&i>=0&&f.setContent(d,i),h&&h.container&&(dc(h,na),hc(h),Fa(h));v=!1}r=q=f.currItem.initialZoomLevel,aa=f.currItem.bounds,aa&&(ma.x=aa.center.x,ma.y=aa.center.y,Ea(!0)),Aa("resize")},zoomTo:function(a,b,c,d,f){b&&(r=q,pb.x=Math.abs(b.x)-ma.x,pb.y=Math.abs(b.y)-ma.y,Ja(la,ma));var g=Pa(a,!1),h={};Sa("x",g,h,a),Sa("y",g,h,a);var i=q,j={x:ma.x,y:ma.y};Ka(h);var k=function(b){1===b?(q=a,ma.x=h.x,ma.y=h.y):(q=(a-i)*b+i,ma.x=(h.x-j.x)*b+j.x,ma.y=(h.y-j.y)*b+j.y),f&&f(b),Ea(1===b)};c?ab("customZoomTo",0,1,c,d||e.easing.sine.inOut,k):k(1)}},cb={},db={},eb={},fb={},gb={},hb=[],ib={},jb=[],kb={},lb=0,mb=ja(),nb=0,ob=ja(),pb=ja(),qb=ja(),rb=function(a,b){return a.x===b.x&&a.y===b.y},sb=function(a,b){return Math.abs(a.x-b.x)<25&&Math.abs(a.y-b.y)<25},tb=function(a,b){return kb.x=Math.abs(a.x-b.x),kb.y=Math.abs(a.y-b.y),Math.sqrt(kb.x*kb.x+kb.y*kb.y)},ub=function(){W&&(G(W),W=null)},vb=function(){S&&(W=F(vb),Lb())},wb=function(){return!("fit"===g.scaleMode&&q===f.currItem.initialZoomLevel)},xb=function(a,b){return!(!a||a===document)&&(!(a.getAttribute("class")&&a.getAttribute("class").indexOf("pswp__scroll-wrap")>-1)&&(b(a)?a:xb(a.parentNode,b)))},yb={},zb=function(a,b){return yb.prevent=!xb(a.target,g.isClickableElement),Aa("preventDragEvent",a,b,yb),yb.prevent},Ab=function(a,b){return b.x=a.pageX,b.y=a.pageY,b.id=a.identifier,b},Bb=function(a,b,c){c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y)},Cb=function(a,b,c){if(a-N>50){var d=jb.length>2?jb.shift():{};d.x=b,d.y=c,jb.push(d),N=a}},Db=function(){var a=ma.y-f.currItem.initialPosition.y;return 1-Math.abs(a/(na.y/2))},Eb={},Fb={},Gb=[],Hb=function(a){for(;Gb.length>0;)Gb.pop();return D?(ia=0,hb.forEach(function(a){0===ia?Gb[0]=a:1===ia&&(Gb[1]=a),ia++})):a.type.indexOf("touch")>-1?a.touches&&a.touches.length>0&&(Gb[0]=Ab(a.touches[0],Eb),a.touches.length>1&&(Gb[1]=Ab(a.touches[1],Fb))):(Eb.x=a.pageX,Eb.y=a.pageY,Eb.id="",Gb[0]=Eb),Gb},Ib=function(a,b){var c,d,e,h,i=ma[a]+b[a],j=b[a]>0,k=ob.x+b.x,l=ob.x-ib.x;if(c=i>aa.min[a]||i<aa.max[a]?g.panEndFriction:1,i=ma[a]+b[a]*c,(g.allowPanToNext||q===f.currItem.initialZoomLevel)&&(ba?"h"!==da||"x"!==a||U||(j?(i>aa.min[a]&&(c=g.panEndFriction,aa.min[a]-i,d=aa.min[a]-la[a]),(d<=0||l<0)&&Xb()>1?(h=k,l<0&&k>ib.x&&(h=ib.x)):aa.min.x!==aa.max.x&&(e=i)):(i<aa.max[a]&&(c=g.panEndFriction,i-aa.max[a],d=la[a]-aa.max[a]),(d<=0||l>0)&&Xb()>1?(h=k,l>0&&k<ib.x&&(h=ib.x)):aa.min.x!==aa.max.x&&(e=i))):h=k,"x"===a))return void 0!==h&&(Ha(h,!0),X=h!==ib.x),aa.min.x!==aa.max.x&&(void 0!==e?ma.x=e:X||(ma.x+=b.x*c)),void 0!==h;ca||X||q>f.currItem.fitRatio&&(ma[a]+=b[a]*c)},Jb=function(a){if(!("mousedown"===a.type&&a.button>0)){if(Vb)return void a.preventDefault();if(!R||"mousedown"!==a.type){if(zb(a,!0)&&a.preventDefault(),Aa("pointerDown"),D){var b=e.arraySearch(hb,a.pointerId,"id");b<0&&(b=hb.length),hb[b]={x:a.pageX,y:a.pageY,id:a.pointerId}}var c=Hb(a),d=c.length;Y=null,_a(),S&&1!==d||(S=ea=!0,e.bind(window,n,f),P=ha=fa=Q=X=V=T=U=!1,da=null,Aa("firstTouchStart",c),Ja(la,ma),ka.x=ka.y=0,Ja(fb,c[0]),Ja(gb,fb),ib.x=qa.x*oa,jb=[{x:fb.x,y:fb.y}],N=M=Ba(),Pa(q,!0),ub(),vb()),!Z&&d>1&&!ca&&!X&&(r=q,U=!1,Z=T=!0,ka.y=ka.x=0,Ja(la,ma),Ja(cb,c[0]),Ja(db,c[1]),Bb(cb,db,qb),pb.x=Math.abs(qb.x)-ma.x,pb.y=Math.abs(qb.y)-ma.y,$=_=tb(cb,db))}}},Kb=function(a){if(a.preventDefault(),D){var b=e.arraySearch(hb,a.pointerId,"id");if(b>-1){var c=hb[b];c.x=a.pageX,c.y=a.pageY}}if(S){var d=Hb(a);if(da||V||Z)Y=d;else if(ob.x!==qa.x*oa)da="h";else{var f=Math.abs(d[0].x-fb.x)-Math.abs(d[0].y-fb.y);Math.abs(f)>=10&&(da=f>0?"h":"v",Y=d)}}},Lb=function(){if(Y){var a=Y.length;if(0!==a)if(Ja(cb,Y[0]),eb.x=cb.x-fb.x,eb.y=cb.y-fb.y,Z&&a>1){if(fb.x=cb.x,fb.y=cb.y,!eb.x&&!eb.y&&rb(Y[1],db))return;Ja(db,Y[1]),U||(U=!0,Aa("zoomGestureStarted"));var b=tb(cb,db),c=Qb(b);c>f.currItem.initialZoomLevel+f.currItem.initialZoomLevel/15&&(ha=!0);var d=1,e=Qa(),h=Ra();if(c<e)if(g.pinchToClose&&!ha&&r<=f.currItem.initialZoomLevel){var i=e-c,j=1-i/(e/1.2);Ca(j),Aa("onPinchClose",j),fa=!0}else d=(e-c)/e,d>1&&(d=1),c=e-d*(e/3);else c>h&&(d=(c-h)/(6*e),d>1&&(d=1),c=h+d*e);d<0&&(d=0),$=b,Bb(cb,db,mb),ka.x+=mb.x-qb.x,ka.y+=mb.y-qb.y,Ja(qb,mb),ma.x=Ia("x",c),ma.y=Ia("y",c),P=c>q,q=c,Ea()}else{if(!da)return;if(ea&&(ea=!1,Math.abs(eb.x)>=10&&(eb.x-=Y[0].x-gb.x),Math.abs(eb.y)>=10&&(eb.y-=Y[0].y-gb.y)),fb.x=cb.x,fb.y=cb.y,0===eb.x&&0===eb.y)return;if("v"===da&&g.closeOnVerticalDrag&&!wb()){ka.y+=eb.y,ma.y+=eb.y;var k=Db();return Q=!0,Aa("onVerticalDrag",k),Ca(k),void Ea()}Cb(Ba(),cb.x,cb.y),V=!0,aa=f.currItem.bounds;var l=Ib("x",eb);l||(Ib("y",eb),Ka(ma),Ea())}}},Mb=function(a){if(L.isOldAndroid){if(R&&"mouseup"===a.type)return;a.type.indexOf("touch")>-1&&(clearTimeout(R),R=setTimeout(function(){R=0},600))}Aa("pointerUp"),zb(a,!1)&&a.preventDefault();var b;if(D){var c=e.arraySearch(hb,a.pointerId,"id");if(c>-1)if(b=hb.splice(c,1)[0],navigator.pointerEnabled)b.type=a.pointerType||"mouse";else{var d={4:"mouse",2:"touch",3:"pen"};b.type=d[a.pointerType],b.type||(b.type=a.pointerType||"mouse")}}var h,i=Hb(a),j=i.length;if("mouseup"===a.type&&(j=0),2===j)return Y=null,!0;1===j&&Ja(gb,i[0]),0!==j||da||ca||(b||("mouseup"===a.type?b={x:a.pageX,y:a.pageY,type:"mouse"}:a.changedTouches&&a.changedTouches[0]&&(b={x:a.changedTouches[0].pageX,y:a.changedTouches[0].pageY,type:"touch"})),Aa("touchRelease",a,b));var k=-1;if(0===j&&(S=!1,e.unbind(window,n,f),ub(),Z?k=0:-1!==nb&&(k=Ba()-nb)),nb=1===j?Ba():-1,h=-1!==k&&k<150?"zoom":"swipe",Z&&j<2&&(Z=!1,1===j&&(h="zoomPointerUp"),Aa("zoomGestureEnded")),Y=null,V||U||ca||Q)if(_a(),O||(O=Nb()),O.calculateSwipeSpeed("x"),Q){var l=Db();if(l<g.verticalDragRange)f.close();else{var m=ma.y,o=ga;ab("verticalDrag",0,1,300,e.easing.cubic.out,function(a){ma.y=(f.currItem.initialPosition.y-m)*a+m,Ca((1-o)*a+o),Ea()}),Aa("onVerticalDrag",1)}}else{if((X||ca)&&0===j){var p=Pb(h,O);if(p)return;h="zoomPointerUp"}if(!ca)return"swipe"!==h?void Rb():void(!X&&q>f.currItem.fitRatio&&Ob(O))}},Nb=function(){var a,b,c={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(d){jb.length>1?(a=Ba()-N+50,b=jb[jb.length-2][d]):(a=Ba()-M,b=gb[d]),c.lastFlickOffset[d]=fb[d]-b,c.lastFlickDist[d]=Math.abs(c.lastFlickOffset[d]),c.lastFlickDist[d]>20?c.lastFlickSpeed[d]=c.lastFlickOffset[d]/a:c.lastFlickSpeed[d]=0,Math.abs(c.lastFlickSpeed[d])<.1&&(c.lastFlickSpeed[d]=0),c.slowDownRatio[d]=.95,c.slowDownRatioReverse[d]=1-c.slowDownRatio[d],c.speedDecelerationRatio[d]=1},calculateOverBoundsAnimOffset:function(a,b){c.backAnimStarted[a]||(ma[a]>aa.min[a]?c.backAnimDestination[a]=aa.min[a]:ma[a]<aa.max[a]&&(c.backAnimDestination[a]=aa.max[a]),void 0!==c.backAnimDestination[a]&&(c.slowDownRatio[a]=.7,c.slowDownRatioReverse[a]=1-c.slowDownRatio[a],c.speedDecelerationRatioAbs[a]<.05&&(c.lastFlickSpeed[a]=0,c.backAnimStarted[a]=!0,ab("bounceZoomPan"+a,ma[a],c.backAnimDestination[a],b||300,e.easing.sine.out,function(b){ma[a]=b,Ea()}))))},calculateAnimOffset:function(a){c.backAnimStarted[a]||(c.speedDecelerationRatio[a]=c.speedDecelerationRatio[a]*(c.slowDownRatio[a]+c.slowDownRatioReverse[a]-c.slowDownRatioReverse[a]*c.timeDiff/10),c.speedDecelerationRatioAbs[a]=Math.abs(c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]),c.distanceOffset[a]=c.lastFlickSpeed[a]*c.speedDecelerationRatio[a]*c.timeDiff,ma[a]+=c.distanceOffset[a])},panAnimLoop:function(){if(Xa.zoomPan&&(Xa.zoomPan.raf=F(c.panAnimLoop),c.now=Ba(),c.timeDiff=c.now-c.lastNow,c.lastNow=c.now,c.calculateAnimOffset("x"),c.calculateAnimOffset("y"),Ea(),c.calculateOverBoundsAnimOffset("x"),c.calculateOverBoundsAnimOffset("y"),c.speedDecelerationRatioAbs.x<.05&&c.speedDecelerationRatioAbs.y<.05))return ma.x=Math.round(ma.x),ma.y=Math.round(ma.y),Ea(),void Za("zoomPan")}};return c},Ob=function(a){if(a.calculateSwipeSpeed("y"),aa=f.currItem.bounds,a.backAnimDestination={},a.backAnimStarted={},Math.abs(a.lastFlickSpeed.x)<=.05&&Math.abs(a.lastFlickSpeed.y)<=.05)return a.speedDecelerationRatioAbs.x=a.speedDecelerationRatioAbs.y=0,a.calculateOverBoundsAnimOffset("x"),a.calculateOverBoundsAnimOffset("y"),!0;$a("zoomPan"),a.lastNow=Ba(),a.panAnimLoop()},Pb=function(a,b){var c;ca||(lb=k);var d;if("swipe"===a){var h=fb.x-gb.x,i=b.lastFlickDist.x<10;h>30&&(i||b.lastFlickOffset.x>20)?d=-1:h<-30&&(i||b.lastFlickOffset.x<-20)&&(d=1)}var j;d&&(k+=d,k<0?(k=g.loop?Xb()-1:0,j=!0):k>=Xb()&&(k=g.loop?0:Xb()-1,j=!0),j&&!g.loop||(ra+=d,oa-=d,c=!0));var l,m=qa.x*oa,n=Math.abs(m-ob.x);return c||m>ob.x==b.lastFlickSpeed.x>0?(l=Math.abs(b.lastFlickSpeed.x)>0?n/Math.abs(b.lastFlickSpeed.x):333,l=Math.min(l,400),l=Math.max(l,250)):l=333,lb===k&&(c=!1),ca=!0,Aa("mainScrollAnimStart"),ab("mainScroll",ob.x,m,l,e.easing.cubic.out,Ha,function(){_a(),ca=!1,lb=-1,(c||lb!==k)&&f.updateCurrItem(),Aa("mainScrollAnimComplete")}),c&&f.updateCurrItem(!0),c},Qb=function(a){return 1/_*a*r},Rb=function(){var a=q,b=Qa(),c=Ra();q<b?a=b:q>c&&(a=c);var d,g=ga;return fa&&!P&&!ha&&q<b?(f.close(),!0):(fa&&(d=function(a){Ca((1-g)*a+g)}),f.zoomTo(a,0,200,e.easing.cubic.out,d),!0)};wa("Gestures",{publicMethods:{initGestures:function(){var a=function(a,b,c,d,e){y=a+b,z=a+c,A=a+d,B=e?a+e:""};D=L.pointerEvent,D&&L.touch&&(L.touch=!1),D?navigator.pointerEnabled?a("pointer","down","move","up","cancel"):a("MSPointer","Down","Move","Up","Cancel"):L.touch?(a("touch","start","move","end","cancel"),E=!0):a("mouse","down","move","up"),n=z+" "+A+" "+B,o=y,D&&!E&&(E=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),f.likelyTouchDevice=E,p[y]=Jb,p[z]=Kb,p[A]=Mb,B&&(p[B]=p[A]),L.touch&&(o+=" mousedown",n+=" mousemove mouseup",p.mousedown=p[y],p.mousemove=p[z],p.mouseup=p[A]),E||(g.allowPanToNext=!1)}}});var Sb,Tb,Ub,Vb,Wb,Xb,Yb,Zb=function(b,c,d,h){Sb&&clearTimeout(Sb),Vb=!0,Ub=!0;var i;b.initialLayout?(i=b.initialLayout,b.initialLayout=null):i=g.getThumbBoundsFn&&g.getThumbBoundsFn(k);var l=d?g.hideAnimationDuration:g.showAnimationDuration,m=function(){Za("initialZoom"),d?(f.template.removeAttribute("style"),f.bg.removeAttribute("style")):(Ca(1),c&&(c.style.display="block"),e.addClass(a,"pswp--animated-in"),Aa("initialZoom"+(d?"OutEnd":"InEnd"))),h&&h(),Vb=!1};if(!l||!i||void 0===i.x)return Aa("initialZoom"+(d?"Out":"In")),q=b.initialZoomLevel,Ja(ma,b.initialPosition),Ea(),a.style.opacity=d?0:1,Ca(1),void(l?setTimeout(function(){m()},l):m());!function(){var c=j,h=!f.currItem.src||f.currItem.loadError||g.showHideOpacity;b.miniImg&&(b.miniImg.style.webkitBackfaceVisibility="hidden"),d||(q=i.w/b.w,ma.x=i.x,ma.y=i.y-I,f[h?"template":"bg"].style.opacity=.001,Ea()),$a("initialZoom"),d&&!c&&e.removeClass(a,"pswp--animated-in"),h&&(d?e[(c?"remove":"add")+"Class"](a,"pswp--animate_opacity"):setTimeout(function(){e.addClass(a,"pswp--animate_opacity")},30)),
Sb=setTimeout(function(){if(Aa("initialZoom"+(d?"Out":"In")),d){var f=i.w/b.w,g={x:ma.x,y:ma.y},j=q,k=ga,n=function(b){1===b?(q=f,ma.x=i.x,ma.y=i.y-K):(q=(f-j)*b+j,ma.x=(i.x-g.x)*b+g.x,ma.y=(i.y-K-g.y)*b+g.y),Ea(),h?a.style.opacity=1-b:Ca(k-b*k)};c?ab("initialZoom",0,1,l,e.easing.cubic.out,n,m):(n(1),Sb=setTimeout(m,l+20))}else q=b.initialZoomLevel,Ja(ma,b.initialPosition),Ea(),Ca(1),h?a.style.opacity=1:Ca(1),Sb=setTimeout(m,l+20)},d?25:90)}()},$b={},_b=[],ac={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Tb.length}},bc=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},cc=function(a,b,c){var d=a.bounds;d.center.x=Math.round(($b.x-b)/2),d.center.y=Math.round(($b.y-c)/2)+a.vGap.top,d.max.x=b>$b.x?Math.round($b.x-b):d.center.x,d.max.y=c>$b.y?Math.round($b.y-c)+a.vGap.top:d.center.y,d.min.x=b>$b.x?0:d.center.x,d.min.y=c>$b.y?a.vGap.top:d.center.y},dc=function(a,b,c){if(a.src&&!a.loadError){var d=!c;if(d&&(a.vGap||(a.vGap={top:0,bottom:0}),Aa("parseVerticalMargin",a)),$b.x=b.x,$b.y=b.y-a.vGap.top-a.vGap.bottom,d){var e=$b.x/a.w,f=$b.y/a.h;a.fitRatio=e<f?e:f;var h=g.scaleMode;"orig"===h?c=1:"fit"===h&&(c=a.fitRatio),c>1&&(c=1),a.initialZoomLevel=c,a.bounds||(a.bounds=bc())}if(!c)return;return cc(a,a.w*c,a.h*c),d&&c===a.initialZoomLevel&&(a.initialPosition=a.bounds.center),a.bounds}return a.w=a.h=0,a.initialZoomLevel=a.fitRatio=1,a.bounds=bc(),a.initialPosition=a.bounds.center,a.bounds},ec=function(a,b,c,d,e,g){b.loadError||d&&(b.imageAppended=!0,hc(b,d,b===f.currItem&&va),c.appendChild(d),g&&setTimeout(function(){b&&b.loaded&&b.placeholder&&(b.placeholder.style.display="none",b.placeholder=null)},500))},fc=function(a){a.loading=!0,a.loaded=!1;var b=a.img=e.createEl("pswp__img","img"),c=function(){a.loading=!1,a.loaded=!0,a.loadComplete?a.loadComplete(a):a.img=null,b.onload=b.onerror=null,b=null};return b.onload=c,b.onerror=function(){a.loadError=!0,c()},b.src=a.src,b},gc=function(a,b){if(a.src&&a.loadError&&a.container)return b&&(a.container.innerHTML=""),a.container.innerHTML=g.errorMsg.replace("%url%",a.src),!0},hc=function(a,b,c){if(a.src){b||(b=a.container.lastChild);var d=c?a.w:Math.round(a.w*a.fitRatio),e=c?a.h:Math.round(a.h*a.fitRatio);a.placeholder&&!a.loaded&&(a.placeholder.style.width=d+"px",a.placeholder.style.height=e+"px"),b.style.width=d+"px",b.style.height=e+"px"}},ic=function(){if(_b.length){for(var a,b=0;b<_b.length;b++)a=_b[b],a.holder.index===a.index&&ec(a.index,a.item,a.baseDiv,a.img,0,a.clearPlaceholder);_b=[]}};wa("Controller",{publicMethods:{lazyLoadItem:function(a){a=xa(a);var b=Wb(a);b&&(!b.loaded&&!b.loading||v)&&(Aa("gettingData",a,b),b.src&&fc(b))},initController:function(){e.extend(g,ac,!0),f.items=Tb=c,Wb=f.getItemAt,Xb=g.getNumItemsFn,Yb=g.loop,Xb()<3&&(g.loop=!1),za("beforeChange",function(a){var b,c=g.preload,d=null===a||a>=0,e=Math.min(c[0],Xb()),h=Math.min(c[1],Xb());for(b=1;b<=(d?h:e);b++)f.lazyLoadItem(k+b);for(b=1;b<=(d?e:h);b++)f.lazyLoadItem(k-b)}),za("initialLayout",function(){f.currItem.initialLayout=g.getThumbBoundsFn&&g.getThumbBoundsFn(k)}),za("mainScrollAnimComplete",ic),za("initialZoomInEnd",ic),za("destroy",function(){for(var a,b=0;b<Tb.length;b++)a=Tb[b],a.container&&(a.container=null),a.placeholder&&(a.placeholder=null),a.img&&(a.img=null),a.preloader&&(a.preloader=null),a.loadError&&(a.loaded=a.loadError=!1);_b=null})},getItemAt:function(a){return a>=0&&(void 0!==Tb[a]&&Tb[a])},allowProgressiveImg:function(){return g.forceProgressiveLoading||!E||g.mouseUsed||screen.width>1200},setContent:function(a,b){g.loop&&(b=xa(b));var c=f.getItemAt(a.index);c&&(c.container=null);var d,i=f.getItemAt(b);if(!i)return void(a.el.innerHTML="");Aa("gettingData",b,i),a.index=b,a.item=i;var j=i.container=e.createEl("pswp__zoom-wrap");if(!i.src&&i.html&&(i.html.tagName?j.appendChild(i.html):j.innerHTML=i.html),gc(i),dc(i,na),!i.src||i.loadError||i.loaded)i.src&&!i.loadError&&(d=e.createEl("pswp__img","img"),d.style.opacity=1,d.src=i.src,hc(i,d),ec(0,i,j,d));else{if(i.loadComplete=function(c){if(h){if(a&&a.index===b){if(gc(c,!0))return c.loadComplete=c.img=null,dc(c,na),Fa(c),void(a.index===k&&f.updateCurrZoomItem());c.imageAppended?!Vb&&c.placeholder&&(c.placeholder.style.display="none",c.placeholder=null):L.transform&&(ca||Vb)?_b.push({item:c,baseDiv:j,img:c.img,index:b,holder:a,clearPlaceholder:!0}):ec(0,c,j,c.img,0,!0)}c.loadComplete=null,c.img=null,Aa("imageLoadComplete",b,c)}},e.features.transform){var l="pswp__img pswp__img--placeholder";l+=i.msrc?"":" pswp__img--placeholder--blank";var m=e.createEl(l,i.msrc?"img":"");i.msrc&&(m.src=i.msrc),hc(i,m),j.appendChild(m),i.placeholder=m}i.loading||fc(i),f.allowProgressiveImg()&&(!Ub&&L.transform?_b.push({item:i,baseDiv:j,img:i.img,index:b,holder:a}):ec(0,i,j,i.img,0,!0))}Ub||b!==k?Fa(i):(ba=j.style,Zb(i,d||i.img)),a.el.innerHTML="",a.el.appendChild(j)},cleanSlide:function(a){a.img&&(a.img.onload=a.img.onerror=null),a.loaded=a.loading=a.img=a.imageAppended=!1}}});var jc,kc={},lc=function(a,b,c){var d=document.createEvent("CustomEvent"),e={origEvent:a,target:a.target,releasePoint:b,pointerType:c||"touch"};d.initCustomEvent("pswpTap",!0,!0,e),a.target.dispatchEvent(d)};wa("Tap",{publicMethods:{initTap:function(){za("firstTouchStart",f.onTapStart),za("touchRelease",f.onTapRelease),za("destroy",function(){kc={},jc=null})},onTapStart:function(a){a.length>1&&(clearTimeout(jc),jc=null)},onTapRelease:function(a,b){if(b&&!V&&!T&&!Ya){var c=b;if(jc&&(clearTimeout(jc),jc=null,sb(c,kc)))return void Aa("doubleTap",c);if("mouse"===b.type)return void lc(a,b,"mouse");if("BUTTON"===a.target.tagName.toUpperCase()||e.hasClass(a.target,"pswp__single-tap"))return void lc(a,b);Ja(kc,c),jc=setTimeout(function(){lc(a,b),jc=null},300)}}}});var mc;wa("DesktopZoom",{publicMethods:{initDesktopZoom:function(){J||(E?za("mouseUsed",function(){f.setupDesktopZoom()}):f.setupDesktopZoom(!0))},setupDesktopZoom:function(b){mc={};var c="wheel mousewheel DOMMouseScroll";za("bindEvents",function(){e.bind(a,c,f.handleMouseWheel)}),za("unbindEvents",function(){mc&&e.unbind(a,c,f.handleMouseWheel)}),f.mouseZoomedIn=!1;var d,g=function(){f.mouseZoomedIn&&(e.removeClass(a,"pswp--zoomed-in"),f.mouseZoomedIn=!1),q<1?e.addClass(a,"pswp--zoom-allowed"):e.removeClass(a,"pswp--zoom-allowed"),h()},h=function(){d&&(e.removeClass(a,"pswp--dragging"),d=!1)};za("resize",g),za("afterChange",g),za("pointerDown",function(){f.mouseZoomedIn&&(d=!0,e.addClass(a,"pswp--dragging"))}),za("pointerUp",h),b||g()},handleMouseWheel:function(a){if(q<=f.currItem.fitRatio)return g.modal&&(!g.closeOnScroll||Ya||S?a.preventDefault():C&&Math.abs(a.deltaY)>2&&(j=!0,f.close())),!0;if(a.stopPropagation(),mc.x=0,"deltaX"in a)1===a.deltaMode?(mc.x=18*a.deltaX,mc.y=18*a.deltaY):(mc.x=a.deltaX,mc.y=a.deltaY);else if("wheelDelta"in a)a.wheelDeltaX&&(mc.x=-.16*a.wheelDeltaX),a.wheelDeltaY?mc.y=-.16*a.wheelDeltaY:mc.y=-.16*a.wheelDelta;else{if(!("detail"in a))return;mc.y=a.detail}Pa(q,!0);var b=ma.x-mc.x,c=ma.y-mc.y;(g.modal||b<=aa.min.x&&b>=aa.max.x&&c<=aa.min.y&&c>=aa.max.y)&&a.preventDefault(),f.panTo(b,c)},toggleDesktopZoom:function(b){b=b||{x:na.x/2+pa.x,y:na.y/2+pa.y};var c=g.getDoubleTapZoom(!0,f.currItem),d=q===c;f.mouseZoomedIn=!d,f.zoomTo(d?f.currItem.initialZoomLevel:c,b,333),e[(d?"remove":"add")+"Class"](a,"pswp--zoomed-in")}}});var nc,oc,pc,qc,rc,sc,tc,uc,vc,wc,xc,yc,zc={history:!0,galleryUID:1},Ac=function(){return xc.hash.substring(1)},Bc=function(){nc&&clearTimeout(nc),pc&&clearTimeout(pc)},Cc=function(){var a=Ac(),b={};if(a.length<5)return b;var c,d=a.split("&");for(c=0;c<d.length;c++)if(d[c]){var e=d[c].split("=");e.length<2||(b[e[0]]=e[1])}if(g.galleryPIDs){var f=b.pid;for(b.pid=0,c=0;c<Tb.length;c++)if(Tb[c].pid===f){b.pid=c;break}}else b.pid=parseInt(b.pid,10)-1;return b.pid<0&&(b.pid=0),b},Dc=function(){if(pc&&clearTimeout(pc),Ya||S)return void(pc=setTimeout(Dc,500));qc?clearTimeout(oc):qc=!0;var a=k+1,b=Wb(k);b.hasOwnProperty("pid")&&(a=b.pid);var c=tc+"&gid="+g.galleryUID+"&pid="+a;uc||-1===xc.hash.indexOf(c)&&(wc=!0);var d=xc.href.split("#")[0]+"#"+c;yc?"#"+c!==window.location.hash&&history[uc?"replaceState":"pushState"]("",document.title,d):uc?xc.replace(d):xc.hash=c,uc=!0,oc=setTimeout(function(){qc=!1},60)};wa("History",{publicMethods:{initHistory:function(){if(e.extend(g,zc,!0),g.history){xc=window.location,wc=!1,vc=!1,uc=!1,tc=Ac(),yc="pushState"in history,tc.indexOf("gid=")>-1&&(tc=tc.split("&gid=")[0],tc=tc.split("?gid=")[0]),za("afterChange",f.updateURL),za("unbindEvents",function(){e.unbind(window,"hashchange",f.onHashChange)});var a=function(){sc=!0,vc||(wc?history.back():tc?xc.hash=tc:yc?history.pushState("",document.title,xc.pathname+xc.search):xc.hash=""),Bc()};za("unbindEvents",function(){j&&a()}),za("destroy",function(){sc||a()}),za("firstUpdate",function(){k=Cc().pid});var b=tc.indexOf("pid=");b>-1&&(tc=tc.substring(0,b),"&"===tc.slice(-1)&&(tc=tc.slice(0,-1))),setTimeout(function(){h&&e.bind(window,"hashchange",f.onHashChange)},40)}},onHashChange:function(){if(Ac()===tc)return vc=!0,void f.close();qc||(rc=!0,f.goTo(Cc().pid),rc=!1)},updateURL:function(){Bc(),rc||(uc?nc=setTimeout(Dc,800):Dc())}}}),e.extend(f,bb)}});